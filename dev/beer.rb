require 'psych'

sampleString = "<table dir='ltr' border=0 cellpadding=0 cellspacing=0 class='tblGenFixed' id='tblMain'><tr class='rShim'><td class='rShim' style='width:0;'><td class='rShim' style='width:165px;'><td class='rShim' style='width:156px;'><td class='rShim' style='width:182px;'><td class='rShim' style='width:63px;'><td class='rShim' style='width:63px;'><td class='rShim' style='width:76px;'><td class='rShim' style='width:67px;'><td class='rShim' style='width:220px;'><tr dir='ltr'><td class=hd><p style='height:29px;'>.</td><td  colspan=7 dir='ltr' class='s0'>Current Selection<td style='display:none;'><td style='display:none;'><td style='display:none;'><td style='display:none;'><td style='display:none;'><td style='display:none;'><td  class='s1'></tr><tr dir='ltr'><td class=hd><p style='height:16px;'>.</td><td  dir='ltr' class='s2'>Brewery<td  dir='ltr' class='s3'>Beer<td  dir='ltr' class='s4'>Style<td  dir='ltr' class='s5'>ABV<td  dir='ltr' class='s6'>.3L<td  dir='ltr' class='s6'>.5 L<td  dir='ltr' class='s6'>1L<td  class='s7'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Bear Republic<td  dir='ltr' class='s9'>Racer 5<td  dir='ltr' class='s9'>IPA<td  class='s10'>7.00%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s11'></tr><tr dir='ltr'><td class=hd><p style='height:27px;'>.</td><td  dir='ltr' class='s8'>Bison<td  dir='ltr' class='s9'>Hop Cuveé<td  dir='ltr' class='s12'>West Coast Ale<td  class='s10'>5.50%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s11'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Firehouse<td  dir='ltr' class='s9'>Strong Arm Porter<td  dir='ltr' class='s9'>Porter<td  class='s10'>7.10%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Firehouse<td  dir='ltr' class='s9'>IPA<td  dir='ltr' class='s9'>American IPA<td  class='s10'>6.80%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s11'></tr><tr dir='ltr'><td class=hd><p style='height:27px;'>.</td><td  dir='ltr' class='s8'>Gaffel<td  dir='ltr' class='s9'>Kӧlsch<td  dir='ltr' class='s9'>Kӧlsch<td  class='s10'>4.80%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s11'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Hofbräu<td  dir='ltr' class='s9'>Maibock<td  dir='ltr' class='s9'>Maibock<td  class='s10'>7.20%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Hofbräu<td  dir='ltr' class='s9'>Original Lager<td  dir='ltr' class='s9'>Lager<td  class='s10'>5.10%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Hofbräu<td  dir='ltr' class='s9'>Dunkel<td  dir='ltr' class='s9'>Dunkel Lager<td  class='s10'>5.50%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Hofbräu<td  dir='ltr' class='s9'>Hefe-Weiss<td  dir='ltr' class='s9'>Wheat<td  class='s10'>5.10%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Koningshoeven<td  dir='ltr' class='s9'>La Trappe<td  dir='ltr' class='s12'>Quadrupel<td  class='s10'>10.00%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:26px;'>.</td><td  dir='ltr' class='s8'>Mad River<td  dir='ltr' class='s9'>Jamaica Red<td  dir='ltr' class='s9'>American Amber<td  class='s10'>6.50%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:25px;'>.</td><td  dir='ltr' class='s8'>Marin<td  dir='ltr' class='s9'>Abbey Special<td  dir='ltr' class='s14'>Abbey Dubbel<td  class='s10'>6.80%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:27px;'>.</td><td  dir='ltr' class='s8'>Moylan&#39;s<td  dir='ltr' class='s9'>Kilt lifter<td  dir='ltr' class='s9'>Scotch Ale<td  class='s10'>8.00%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s13'></tr><tr dir='ltr'><td class=hd><p style='height:29px;'>.</td><td  dir='ltr' class='s8'>Rubicon<td  dir='ltr' class='s9'>Monkey Knife Fight<td  dir='ltr' class='s9'>Pale Ale<td  class='s10'>5.00%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s11'></tr><tr dir='ltr'><td class=hd><p style='height:29px;'>.</td><td  dir='ltr' class='s8'>Schwaben<td  dir='ltr' class='s9'>Naturtübe<td  dir='ltr' class='s12'>Unfiltered Pilsner<td  class='s10'>5.00%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s11'></tr><tr dir='ltr'><td class=hd><p style='height:25px;'>.</td><td  dir='ltr' class='s8'>Weltenburger<td  dir='ltr' class='s9'>Anno 1050<td  dir='ltr' class='s9'>Marzen/Oktoberfest<td  class='s10'>5.50%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s15'></tr><tr dir='ltr'><td class=hd><p style='height:25px;'>.</td><td  dir='ltr' class='s8'>Weltenburger<td  dir='ltr' class='s9'>Hefe-Weiss Hell<td  dir='ltr' class='s9'>Hefeweizen<td  class='s10'>5.40%<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s15'></tr><tr dir='ltr'><td class=hd><p style='height:25px;'>.</td><td  class='s16'><td  class='s17'><td  class='s17'><td  class='s18'><td  class='s11'><td  class='s11'><td  class='s11'><td  class='s15'></tr><tr dir='ltr'><td class=hd><p style='height:32px;'>.</td><td  class='s19'><td  class='s20'><td  class='s20'><td  class='s21'><td  class='s22'><td  dir='ltr' class='s23'>Bottle<td  class='s24'><td  class='s15'></tr><tr dir='ltr'><td class=hd><p style='height:35px;'>.</td><td  dir='ltr' class='s8'>Aldrona<td  dir='ltr' class='s9'>Chardonnay<td  class='s25'>2010<td  class='s11'><td  class='s11'><td  class='s11'><td  class='s15'><td  dir='ltr' class='s26'>-- Lemony finish, white peach and fresh pineapple.</tr><tr dir='ltr'><td class=hd><p style='height:50px;'>.</td><td  dir='ltr' class='s8'>Elizabeth Spencer<td  dir='ltr' class='s9'>Sauvignon Blanc<td  class='s25'>2011<td  class='s11'><td  class='s15'><td  class='s11'><td  class='s15'><td  dir='ltr' class='s26'>--Luscious flavors of white peach, ripe nectarine and subtle citrus.</tr><tr dir='ltr'><td class=hd><p style='height:33px;'>.</td><td  dir='ltr' class='s8'>Jeff Runquist<td  dir='ltr' class='s9'>Petit Sirah<td  class='s27'>2010<td  class='s28'><td  class='s15'><td  class='s11'><td  class='s15'><td  dir='ltr' class='s29'>-- Mike&#39;s all time favorite wine. Deep purple, jammy, juicy and just outstanding!!</tr><tr dir='ltr'><td class=hd><p style='height:52px;'>.</td><td  dir='ltr' class='s8'>Jeff Runquist<td  dir='ltr' class='s9'>1448 (House Red)<td  class='s27'>2010<td  class='s11'><td  class='s15'><td  class='s11'><td  class='s15'><td  dir='ltr' class='s30'>-- Deep red with strong fruit and chocolate flavors. A steal at this price.</tr></table>"
  
  #  iteration
  beer_template = {Brewery: 'snowflakes', Beer: 'awesome', Style: 'barley', ABV: 'who cares'}
  cycle = 0
  init_s = "Bear Republic"
  cut_s = "Bottle"
  record_switch = false
  beers = []
  sampleString.scan(/>([\w].[^><]+)</) do |x|
    if init_s == x[0]
      puts "start Recording..."
      record_switch = !record_switch 
    end
    if cut_s == x[0]
      puts "finished Recording..."
      record_switch = !record_switch
    end
    
    if record_switch
      beer_template[beer_template.keys[cycle]] = x[0]
      if cycle == 3
        cycle = 0
        beers.push(beer_template.clone)
      else
        cycle = cycle + 1
      end
      
    end
  end
  
  puts Psych.dump(beers)
    

  
  
          